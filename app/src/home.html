<!DOCTYPE html>
<html>
  <head>
    <title>首页</title>
  </head>
  <style>
    input {
      display: block;
      margin-bottom: 12px;
    }
    a {
      margin-bottom: 20px;
    }
    img {
      height: 200px;
      width: 200px;
    }
  </style>
  <body>
    <a href="http://localhost:8081/create.html">创建自己的nft</a><br/>
    <a href="http://localhost:8081/myInformation.html">个人信息</a><br/>
    <a href="http://localhost:8081/activity.html">活动页面</a><br/>
    <a href="http://localhost:8081/index.html" onclick="accountModel.logout()">注销</a><br/>

    <label>当前链上nft：</label>
    <div id="nft0">
      <img id="num0"/><br>
      <span id="name0"></span><br/>
      <span id="tokenId0"></span><br/>
      <span id="author0"></span><br/>
      <span id="description0"></span>
      <span id="activityNFTAmount0" hidden></span>
    </div><br>
    <div id="nft1">
      <img id="num1"/><br>
      <span id="name1"></span><br/>
      <span id="tokenId1"></span><br/>
      <span id="author1"></span><br/>
      <span id="description1"></span>
      <span id="activityNFTAmount1" hidden></span>
    </div><br>
    <div id="nft2">
      <img id="num2"/><br>
      <span id="name2"></span><br/>
      <span id="tokenId2"></span><br/>
      <span id="author2"></span><br/>
      <span id="description2"></span>
      <span id="activityNFTAmount2" hidden></span>
    </div><br>
    <div id="nft3">
      <img id="num3"/><br>
      <span id="name3"></span><br/>
      <span id="tokenId3"></span><br/>
      <span id="author3"></span><br/>
      <span id="description3"></span>
      <span id="activityNFTAmount3" hidden></span>
    </div><br>
    <br><input type="text" value="在此输入要查询的nft名字" id="nftNameToSearch">
    <br><input type="button" onclick="nftModel.search()" value="搜索">
    <br>第 <label id="page">1</label> 页
    <input type="button" onclick="previous()" value="上一页">
    <script>
      function previous(){
        // console.log(document.getElementById("page").innerText)；
        var page = document.getElementById("page").innerText;
        if(document.getElementById("page").innerText > 1){
          var amount = null;
          document.getElementById("page").innerText--;
          for(let i = 0;i < 4;i++){
            amount = document.getElementById("activityNFTAmount"+i).innerText;
            pageModel.indexId -= new Number(amount);
            console.log(pageModel.indexId);
          }
          pageModel.indexId--;
          pageModel.showAllNFT();
          var amount = pageModel.getMaxHomePage().then(res=>{
          var maxPage = (res % 4 == 0)?(res / 4):(Math.ceil(res / 4));   
          if(new Number(page) == maxPage){
            for(let i = 0;i < 4;i++){
              var nftShow = document.getElementById("nft"+i);
                nftShow.style.display="block";
            } 
          }
        });
        } else {
          console.log("first page!");
        }
      }
    </script>
    <input type="button" onclick="next()" value="下一页">
    <script>
      function next(){
        var amount = pageModel.getMaxHomePage().then(res=>{
          var maxPage = (res % 4 == 0)?(res / 4):(Math.ceil(res / 4));   
          var page = document.getElementById("page").innerText;
          if(new Number(page)< maxPage){
            document.getElementById("page").innerText++;
            pageModel.showAllNFT();
          } else {
            console.log("final page!");
          }
        });
      }
    </script>
    <script src="//cdn.jsdelivr.net/npm/pouchdb@7.3.0/dist/pouchdb.min.js"></script>
    <script src="pouchdbFind.js"></script>
    <script src="index.js"></script>
  </body>
</html>